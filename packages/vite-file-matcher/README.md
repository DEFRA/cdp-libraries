# @defra/vite-file-matcher

A [Vite](https://hapi.dev/module/vite/) compatible file matcher. Used in PRITs (Page Rendering Integration Tests) to
verify that the HTML generated by a call to the server hasn't changed.

## Installation

```bash
npm install --save-dev @defra/vite-file-matcher
```

## Usage

### Setup

In `vite.config.js`, include the matcher in your test.setupFiles as so:

```js
export default defineConfig({
  test: {
    setupFiles: ['@defra/vite-file-matcher/src/custom-snapshot-matcher']
  }
})
```

### Use the matcher in a test

```js
const { result, statusCode } = await server.inject({
  method: 'GET',
  url: '/',
  headers: {}
})

expect(statusCode).toBe(statusCodes.ok)
expect(result).toMatchFile()
```
